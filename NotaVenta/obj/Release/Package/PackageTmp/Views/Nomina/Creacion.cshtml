
@{
    /**/

    /**/

    ViewBag.Title = "Creacion de Nomina";
}
<script src="~/WebJs/Nomina/Creacion.js"></script>
<h2>Creacion de Nomina</h2>
<div id="divIngresoComprobantes">
    <div class="row">
        <div class="col-lg-6">
            <button id="btnCrearNomina" type="button" class="btn btn-primary">Crear Nomina</button>
        </div>
        <div class="col-lg-4" style="display: none">
            <div id="divCausalPago">
                <label class="col-form-label" for="ddlCausalPago">Causal de Pago </label>
                <div class="input-group">
                    <select id="ddlCausalPago" class="form-control">
                        @for (int i = 0; i < ViewBag.causalesPago.Count; ++i)
                        {
                            <option value="@ViewBag.causalesPago[i].Id">@ViewBag.causalesPago[i].Nombre</option>
                        }
                    </select>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div id="divFechaPago">
                <label class="col-form-label" for="txtAno">Fecha Pago</label>
                <div class="input-group date" id="datetimepicker1">
                    <input type="date" name="txtFechaPago" placeholder="Seleccione Fecha Pago" class="form-control" id="txtFechaPago">
                    <div class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <!-- begin col-6 -->
        <div class="col-xl-6 ui-sortable">
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="form-plugins-1">
                <!-- begin panel-heading -->
                <div class="panel-heading ui-sortable-handle">
                    <h2 class="panel-title">Empresas</h2>
                    <div class="panel-heading-btn">
                    </div>
                </div>
                <!-- end panel-heading -->
                <!-- begin panel-body -->
                <div class="panel-body panel-form">
                    @for (int i = 0; i < ViewBag.empresas.Count; ++i)
                    {
                        <form class="form-horizontal form-bordered">
                            <div class="form-group row">
                                <div class="col-lg-4">
                                    <input type="hidden" id="idEmpresa_@ViewBag.empresas[i].IdEmpresa" value="@ViewBag.empresas[i].IdEmpresa" />
                                    <label class="col-form-label" style="padding-top: 20px; padding-bottom: 20px">@ViewBag.empresas[i].NombreEmpresa</label>
                                </div>
                                <div class="col-lg-4" id="divAno_@ViewBag.empresas[i].IdEmpresa">
                                    <label class="col-form-label" for="txtAno">Año</label>
                                    <div class="input-group date" id="datetimepicker1">
                                        <input type="text" name="txtAnoName" disabled placeholder="Seleccione año" class="form-control" id="@ViewBag.empresas[i].IdEmpresa">
                                        <button type="button" class="btn btn-primary" data-toggle="dropdown" aria-expanded="false">
                                            <span class="caret"></span>
                                        </button>
                                        <div id="divListaAnos_@ViewBag.empresas[i].IdEmpresa" class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(62px, 34px, 0px);">
                                        </div>
                                        <div class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4" id="divComprobante_@ViewBag.empresas[i].IdEmpresa">
                                    <label class="col-form-label" for="txtComprobante_@ViewBag.empresas[i].IdEmpresa">Comprobante</label>
                                    <div class="input-group" id="divComprobante">
                                        <input type="text" name="txtComprobanteName" valor="" disabled id="txtComprobante_@ViewBag.empresas[i].IdEmpresa" class="form-control ui-autocomplete-input" placeholder="Ingrese N° comprobante." autocomplete="off">
                                        <label id="lblMensaje_@ViewBag.empresas[i].IdEmpresa" style="display: none; color: red" class="error">Se esta cargando los comprobantes</label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    }
                </div>
                <!-- end panel-body -->
            </div>
            <!-- end panel -->
        </div>
        <!-- end col-6 -->
    </div>
</div>
<div id="divCargandoNomina" style="display: none">
    <div class="alert alert-success" role="alert">
        <h4 class="alert-heading">Creando Nomina</h4>
        <div class="row">
            <div class="col-lg-3">
                <div class="spinner-border text-warning" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div class="col-lg-9">
                <p>Favor espere mientras el sistema crea la nomina.</p>
            </div>
        </div>
        <hr>
        <p class="mb-0">Creacion de nomina.</p>
    </div>
</div>
<div id="divResultadoNomina" style="display: none">
    <div class="row">
        <div class="col-lg-4">
            <button id="btnNuevoNomina" onclick="javascript:location.reload()" class="btn-primary btn" style="width:100%"><i class="fa fa-share-square"></i> Generar Nuevo Nomina</button>
        </div>
        <div class="col-lg-4">
            <a id="aDescargarNomina" style="display: none" href="@Url.Action("DescargarNomina", "Nomina")"></a>
            <button id="btnDescargarNomina" class="btn-primary btn" style="width:100%"><i class="fa fa-download"></i> Descargar Nomina</button>
        </div>
        <div class="col-lg-4">
            <button id="btnEnviarNomina" class="btn-primary btn" style="width:100%"><i class="fa fa-share-square"></i> Enviar Nomina</button>
        </div>
    </div>
</div>
